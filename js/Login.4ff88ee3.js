import{E as a,m as t}from"./element-plus.f1c40bb6.js";import{f as s,o,h as e,j as n,S as r,aL as i,a0 as c,_ as l,Y as d,b0 as m,a5 as p,y as u,ak as f}from"./vendor.f296c83d.js";import{g as b,u as w,a as g}from"./api.af76b8ff.js";import{u as _}from"./user.65536355.js";import{c as v}from"./callApi.ff108172.js";import{_ as k}from"./index.37c11861.js";const h=s({name:"Login",components:{},setup(){const a=_(),s=m(),o=p({title:"Admin Login",form:{account:"",password:"",otp:""},currentOtp:"",token:""}),e=async()=>{const a=await b("");200===a.data.Code?o.currentOtp=a.data.Data.OTP:t({message:`OTP API ERROR!! (${a.data.Code})`,type:"error"})},n=async()=>{await(async()=>{const t={MemberID:a.$state.userStatus.id};await v(g,t,(t=>{a.setUserPermissions(t.data.Data.Permission)}))})(),await s.push({name:"Home"})},r=u((async()=>{await e()}));return{state:o,getOtpNumbers:e,handleLogin:async()=>{const t={Account:o.form.account,Password:o.form.password,OTP:o.form.otp};await v(w,t,(async t=>{o.token=t.data.Data.Token,await a.setUserStatus({id:t.data.Data.Info.ID,account:t.data.Data.Info.Account,username:t.data.Data.Info.Name,token:t.data.Data.Token})})),await n()},init:r}}}),y={id:"login",class:"flx vertical grow center"},O={class:"login-block"},D={class:"login-block-form"},P=n("h1",null,"Admin Backoffice",-1),j=n("br",null,null,-1),x={class:"input__inner","data-space-bottom":"1rem"},A={class:"input__inner","data-space-bottom":"1rem"},I={class:"input__inner","data-space-bottom":"1rem"},L={class:"flx horizontal v_center"},T={class:"flx horizontal h_end"},U=f("Login");var C=k(h,[["render",function(t,s,m,p,u,f){const b=a;return o(),e("div",y,[n("div",O,[n("div",D,[P,j,n("div",x,[r(n("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.state.form.account=a),type:"text",placeholder:"Username"},null,512),[[i,t.state.form.account]])]),n("div",A,[r(n("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>t.state.form.password=a),type:"password",placeholder:"Password"},null,512),[[i,t.state.form.password]])]),n("div",I,[n("div",L,[r(n("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>t.state.form.otp=a),type:"text",placeholder:"OTP"},null,512),[[i,t.state.form.otp]]),n("div",{class:"otp_number",onClick:s[3]||(s[3]=(...a)=>t.getOtpNumbers&&t.getOtpNumbers(...a))},c(t.state.currentOtp),1)])]),n("div",T,[l(b,{class:"btn__signin",onClick:t.handleLogin},{default:d((()=>[U])),_:1},8,["onClick"])])])])])}]]);export{C as default};
