import{E as a,m as t}from"./element-plus.5303a07c.js";import{f as e,o,h as s,j as n,P as r,aK as i,Z as l,X as d,V as m,b0 as p,a2 as c,v as u,a9 as f}from"./vendor.e6112f1a.js";import{g as w,u as g}from"./api.e30d122a.js";import{u as v}from"./user.76bf05ff.js";import{_ as b}from"./index.31a23933.js";const _=e({name:"Login",components:{},setup(){const a=v(),e=p(),o=c({title:"Admin Login",form:{username:"",password:"",otp:""},currentOtp:"",token:""}),s=async()=>{const a=await w("");200===a.data.Code?o.currentOtp=a.data.Data.OTP:t({message:`OTP API ERROR!! (${a.data.Code})`,type:"error"})},n=u((async()=>{await s()}));return{state:o,getOtpNumbers:s,handleLogin:async()=>{const t={username:o.form.username,password:o.form.password,otp:o.form.otp},s=await g(t);200===s.data.Code&&(o.token=s.data.Data.Token,await a.setToken({account:s.data.Data.Info.Account,username:s.data.Data.Info.Name,token:s.data.Data.Token}),await e.push({name:"Home"}))},init:n}}}),k={id:"login",class:"row vertical grow center"},h={class:"login-block"},O={class:"login-block-form"},y=n("h1",null,"Admin Backoffice",-1),j=n("br",null,null,-1),C={class:"input__inner","data-space-bottom":"1rem"},P={class:"input__inner","data-space-bottom":"1rem"},T={class:"input__inner","data-space-bottom":"1rem"},D={class:"row horizontal v_center"},L={class:"row horizontal h_end"},x=f("Login");var A=b(_,[["render",function(t,e,p,c,u,f){const w=a;return o(),s("div",k,[n("div",h,[n("div",O,[y,j,n("div",C,[r(n("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>t.state.form.username=a),type:"text",placeholder:"Username"},null,512),[[i,t.state.form.username]])]),n("div",P,[r(n("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>t.state.form.password=a),type:"password",placeholder:"Password"},null,512),[[i,t.state.form.password]])]),n("div",T,[n("div",D,[r(n("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>t.state.form.otp=a),type:"text",placeholder:"OTP"},null,512),[[i,t.state.form.otp]]),n("div",{class:"otp_number",onClick:e[3]||(e[3]=(...a)=>t.getOtpNumbers&&t.getOtpNumbers(...a))},l(t.state.currentOtp),1)])]),n("div",L,[d(w,{class:"btn__signin",onClick:t.handleLogin},{default:m((()=>[x])),_:1},8,["onClick"])])])])])}]]);export{A as default};
