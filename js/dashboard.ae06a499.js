import{m as e,i as a,E as t}from"./element-plus.f33a3a8b.js";import{a as s,b as l}from"./api.14b5103b.js";import{f as n,a2 as i,b1 as o,o as r,h as m,j as d,X as c,V as p,Z as u,a9 as f}from"./vendor.4edac398.js";import{_ as g}from"./index.c99f61cd.js";const y=n({name:"Dashboard",setup(){const a=i({img:"src/assets/img/img_dummy.svg",ident:"",file:null,fileName:""});o();return{state:a,getCurrentOverview:async()=>{const a=await s({});200===a.data.Code||e({message:`API ERROR!! (${a.data.Code})`,type:"error"})},selectFile:async t=>{const s=t.target.files[0],l=s.size/1024;a.file=s,a.fileName=s.name,l>200&&e({message:"檔案不可大於 200KB",type:"error"})},handleUpload:()=>{const e=JSON.parse(localStorage.getItem("userInfo")).token,t=new FormData;t.append("Ident",a.ident),t.append("Img",a.file);fetch("/api/admin/image/c",{method:"POST",headers:{token:e},body:t}).then((e=>e.json())).then((e=>{a.img=e.Data.Url}))},getImgApi:async()=>{await l({})}}}}),h={class:"row vertical grow","data-inset":"1rem"},b=["src"],v={class:"row horizontal space_between","data-space-vertical":"1rem"},I={class:"upload-customize"},w=d("span",null,"選擇圖片",-1),C=f("上傳圖片"),j=f("GET IMG");var k=g(y,[["render",function(e,s,l,n,i,o){const f=a,g=t;return r(),m("div",h,[d("img",{src:e.state.img},null,8,b),d("div",v,[d("label",I,[w,d("input",{type:"file",onChange:s[0]||(s[0]=a=>e.selectFile(a))},null,32)]),c(f,{modelValue:e.state.ident,"onUpdate:modelValue":s[1]||(s[1]=a=>e.state.ident=a),type:"text",placeholder:"圖片別名(Ident)"},null,8,["modelValue"]),c(g,{type:"primary",onClick:e.handleUpload},{default:p((()=>[C])),_:1},8,["onClick"])]),d("span",null,u(e.state.fileName),1),c(g,{type:"primary",onClick:e.getImgApi},{default:p((()=>[j])),_:1},8,["onClick"])])}]]);export{k as default};
