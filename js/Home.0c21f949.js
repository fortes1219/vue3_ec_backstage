import{G as e,m as s,h as t,E as a}from"./element-plus.b146bdb7.js";import{f as n,b3 as o,b0 as r,p as l,a5 as i,a4 as u,o as c,h as m,j as d,a0 as p,_ as f,Y as v,ak as h,y as g,V as S,aj as C,X as k,Z as O}from"./vendor.f296c83d.js";import{u as _}from"./user.65536355.js";import{_ as y}from"./index.5e393875.js";const j=n({name:"Header",setup(){const t=o(),a=r(),n=_(),u=l((()=>n.$state.userStatus));return{state:i({routeName:""}),currentRoute:l((()=>t.meta.name)),userInfo:u,handleLogOut:()=>{e.confirm("確定登出?","提示訊息",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{n.logOut(),a.push({name:"Login"}),s({type:"success",message:"已成功登出!"})})).catch((()=>{s({type:"info",message:"已取消"})}))}}}}),I={class:"header"},b={class:"route-name"},x={class:"flx horizontal v_center_end"},L={class:"user-status","data-space-right":"1rem"},N=h(" 變更密碼 "),w=h(" 登出 ");var H=y(j,[["render",function(e,s,n,o,r,l){const i=u("Avatar"),g=t,S=a;return c(),m("div",I,[d("h1",b,p(e.currentRoute),1),d("div",x,[d("span",L,[f(g,null,{default:v((()=>[f(i)])),_:1}),h(" "+p(e.userInfo.username),1)]),f(S,{class:"action",icon:"Lock",plain:""},{default:v((()=>[N])),_:1}),f(S,{class:"logout",plain:"",icon:"MagicStick",onClick:e.handleLogOut},{default:v((()=>[w])),_:1},8,["onClick"])])])}]]);const A=n({name:"Aside",setup(){const e=r(),s=i({routes:[],iconSets:["PieChart","List","ShoppingCartFull","UserFilled","Tools"]}),t=l((()=>e.options.routes)),a=g((()=>{var e;const a=null==(e=t.value.find((e=>"Home"===e.name)))?void 0:e.children,n=JSON.parse(localStorage.getItem("userPermissions")),o=Object.keys(n).filter((e=>!0===n[e].Activity));s.routes=null==a?void 0:a.filter((e=>{var s;return o.includes(null==(s=e.meta)?void 0:s.permissionId)}))}));return{state:s,pool:a,handleRouteChange:s=>{e.push({name:s})}}}}),P={class:"aside"},R=d("div",{class:"logo"},"No Code No Life",-1),z={class:"menu"},J=["onClick"],T={class:"flx horizontal v_center"};var U=y(A,[["render",function(e,s,a,n,o,r){const l=t;return c(),m("div",P,[R,d("nav",null,[d("ul",z,[(c(!0),m(S,null,C(e.state.routes,((s,t)=>{var a;return c(),m("li",{key:t,onClick:t=>e.handleRouteChange(s.name)},[d("div",T,[f(l,null,{default:v((()=>[(c(),k(O(e.state.iconSets[t])))])),_:2},1024),h(" "+p(null==(a=s.meta)?void 0:a.name),1)])],8,J)})),128))])])])}]]);const B=n({name:"Home",components:{Aside:U,Header:H},setup(){const e=_();return{state:i({title:"HOME View"}),init:g((async()=>{const s=JSON.parse(localStorage.getItem("userInfo")),t=JSON.parse(localStorage.getItem("userPermissions"));await e.setUserStatus(s),await e.setUserPermissions(t)}))}}}),E={class:"home el-customize"},F={class:"contents"};var M=y(B,[["render",function(e,s,t,a,n,o){const r=U,l=H,i=u("router-view");return c(),m("div",E,[f(r),d("div",F,[f(l),f(i)])])}]]);export{M as default};
