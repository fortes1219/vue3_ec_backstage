import{G as e,m as s,h as a,E as t}from"./element-plus.f1c40bb6.js";import{f as n,b3 as o,b0 as r,p as l,a5 as i,a4 as u,o as c,h as m,j as d,a0 as p,_ as f,Y as v,ak as h,y as g,V as C,aj as O,X as S,Z as k}from"./vendor.f296c83d.js";import{u as I}from"./user.65536355.js";import{_}from"./index.9424a170.js";const y=n({name:"Header",setup(){const a=o(),t=r(),n=I(),u=l((()=>n.$state.userStatus));return{state:i({routeName:""}),currentRoute:l((()=>a.meta.name)),userInfo:u,handleLogOut:()=>{e.confirm("確定登出?","提示訊息",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{n.logOut(),t.push({name:"Login"}),s({type:"success",message:"已成功登出!"})})).catch((()=>{s({type:"info",message:"已取消"})}))}}}}),b={class:"header"},j={class:"route-name"},L={class:"flx horizontal v_center_end"},x={class:"user-status","data-space-right":"1rem"},N=h(" 變更密碼 "),w=h(" 登出 ");var A=_(y,[["render",function(e,s,n,o,r,l){const i=u("Avatar"),g=a,C=t;return c(),m("div",b,[d("h1",j,p(e.currentRoute),1),d("div",L,[d("span",x,[f(g,null,{default:v((()=>[f(i)])),_:1}),h(" "+p(e.userInfo.username),1)]),f(C,{class:"action",icon:"Lock",plain:""},{default:v((()=>[N])),_:1}),f(C,{class:"logout",plain:"",icon:"MagicStick",onClick:e.handleLogOut},{default:v((()=>[w])),_:1},8,["onClick"])])])}]]);const H=n({name:"Aside",setup(){const e=r(),s=i({routes:[]}),a=l((()=>e.options.routes)),t=g((()=>{var e;const t=null==(e=a.value.find((e=>"Home"===e.name)))?void 0:e.children,n=JSON.parse(localStorage.getItem("userPermissions")),o=Object.keys(n).filter((e=>!0===n[e].Activity));s.routes=null==t?void 0:t.filter((e=>{var s;return o.includes(null==(s=e.meta)?void 0:s.permissionId)}))}));return{state:s,pool:t,handleRouteChange:s=>{e.push({name:s})},setIcons:e=>({Dashboard:"PieChart",Order:"List",Goods:"ShoppingCartFull",Member:"UserFilled",AdminList:"Tools"}[e])}}}),P={class:"aside"},R=d("div",{class:"logo"},"No Code No Life",-1),z={class:"menu"},J=["onClick"],M={class:"flx horizontal v_center"};var T=_(H,[["render",function(e,s,t,n,o,r){const l=a;return c(),m("div",P,[R,d("nav",null,[d("ul",z,[(c(!0),m(C,null,O(e.state.routes,((s,a)=>{var t;return c(),m("li",{key:a,onClick:a=>e.handleRouteChange(s.name)},[d("div",M,[f(l,null,{default:v((()=>[(c(),S(k(e.setIcons(s.name))))])),_:2},1024),h(" "+p(null==(t=s.meta)?void 0:t.name),1)])],8,J)})),128))])])])}]]);const U=n({name:"Home",components:{Aside:T,Header:A},setup(){const e=I();return{state:i({title:"HOME View"}),init:g((async()=>{const s=JSON.parse(localStorage.getItem("userInfo")),a=JSON.parse(localStorage.getItem("userPermissions"));await e.setUserStatus(s),await e.setUserPermissions(a)}))}}}),B={class:"home el-customize"},E={class:"contents"};var F=_(U,[["render",function(e,s,a,t,n,o){const r=T,l=A,i=u("router-view");return c(),m("div",B,[f(r),d("div",E,[f(l),f(i)])])}]]);export{F as default};
