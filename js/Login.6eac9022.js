import{E as a,m as t}from"./element-plus.b146bdb7.js";import{f as s,o as e,h as o,j as n,S as r,aL as i,a0 as l,_ as m,Y as d,b0 as c,a5 as p,y as u,ak as f}from"./vendor.f296c83d.js";import{g as b,u as w,a as g}from"./api.089aa150.js";import{u as _}from"./user.65536355.js";import{c as v}from"./callApi.5016f2d3.js";import{_ as k}from"./index.5e393875.js";const h=s({name:"Login",components:{},setup(){const a=_(),s=c(),e=p({title:"Admin Login",form:{username:"",password:"",otp:""},currentOtp:"",token:""}),o=async()=>{const a=await b("");200===a.data.Code?e.currentOtp=a.data.Data.OTP:t({message:`OTP API ERROR!! (${a.data.Code})`,type:"error"})},n=async()=>{await(async()=>{const t={MemberID:a.$state.userStatus.id};await v(g,t,(t=>{a.setUserPermissions(t.data.Data.Permission)}))})(),await s.push({name:"Home"})},r=u((async()=>{await o()}));return{state:e,getOtpNumbers:o,handleLogin:async()=>{const t={username:e.form.username,password:e.form.password,otp:e.form.otp};await v(w,t,(async t=>{e.token=t.data.Data.Token,await a.setUserStatus({id:t.data.Data.Info.ID,account:t.data.Data.Info.Account,username:t.data.Data.Info.Name,token:t.data.Data.Token})})),await n()},init:r}}}),y={id:"login",class:"flx vertical grow center"},O={class:"login-block"},D={class:"login-block-form"},j=n("h1",null,"Admin Backoffice",-1),x=n("br",null,null,-1),P={class:"input__inner","data-space-bottom":"1rem"},I={class:"input__inner","data-space-bottom":"1rem"},L={class:"input__inner","data-space-bottom":"1rem"},U={class:"flx horizontal v_center"},A={class:"flx horizontal h_end"},C=f("Login");var T=k(h,[["render",function(t,s,c,p,u,f){const b=a;return e(),o("div",y,[n("div",O,[n("div",D,[j,x,n("div",P,[r(n("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.state.form.username=a),type:"text",placeholder:"Username"},null,512),[[i,t.state.form.username]])]),n("div",I,[r(n("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>t.state.form.password=a),type:"password",placeholder:"Password"},null,512),[[i,t.state.form.password]])]),n("div",L,[n("div",U,[r(n("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>t.state.form.otp=a),type:"text",placeholder:"OTP"},null,512),[[i,t.state.form.otp]]),n("div",{class:"otp_number",onClick:s[3]||(s[3]=(...a)=>t.getOtpNumbers&&t.getOtpNumbers(...a))},l(t.state.currentOtp),1)])]),n("div",A,[m(b,{class:"btn__signin",onClick:t.handleLogin},{default:d((()=>[C])),_:1},8,["onClick"])])])])])}]]);export{T as default};
